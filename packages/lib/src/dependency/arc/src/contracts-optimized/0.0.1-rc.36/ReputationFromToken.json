{"contractName":"ReputationFromToken","abi":[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_beneficiary","type":"address"},{"indexed":true,"internalType":"address","name":"_sender","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"Redeem","type":"event"},{"constant":true,"inputs":[],"name":"DELEGATION_HASH_EIP712","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"avatar","outputs":[{"internalType":"contract Avatar","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"curve","outputs":[{"internalType":"contract CurveInterface","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getAgreementHash","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"redeems","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"tokenContract","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"contract Avatar","name":"_avatar","type":"address"},{"internalType":"contract IERC20","name":"_tokenContract","type":"address"},{"internalType":"contract CurveInterface","name":"_curve","type":"address"},{"internalType":"bytes32","name":"_agreementHash","type":"bytes32"}],"name":"initialize","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"_beneficiary","type":"address"},{"internalType":"bytes32","name":"_agreementHash","type":"bytes32"}],"name":"redeem","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"_beneficiary","type":"address"},{"internalType":"bytes32","name":"_agreementHash","type":"bytes32"},{"internalType":"uint256","name":"_signatureType","type":"uint256"},{"internalType":"bytes","name":"_signature","type":"bytes"}],"name":"redeemWithSignature","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"}],"metadata":"{\"compiler\":{\"version\":\"0.5.13+commit.5b0b510c\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_beneficiary\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_sender\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"Redeem\",\"type\":\"event\"},{\"constant\":true,\"inputs\":[],\"name\":\"DELEGATION_HASH_EIP712\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"avatar\",\"outputs\":[{\"internalType\":\"contract Avatar\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"curve\",\"outputs\":[{\"internalType\":\"contract CurveInterface\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getAgreementHash\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"contract Avatar\",\"name\":\"_avatar\",\"type\":\"address\"},{\"internalType\":\"contract IERC20\",\"name\":\"_tokenContract\",\"type\":\"address\"},{\"internalType\":\"contract CurveInterface\",\"name\":\"_curve\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"_agreementHash\",\"type\":\"bytes32\"}],\"name\":\"initialize\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_beneficiary\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"_agreementHash\",\"type\":\"bytes32\"}],\"name\":\"redeem\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_beneficiary\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"_agreementHash\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"_signatureType\",\"type\":\"uint256\"},{\"internalType\":\"bytes\",\"name\":\"_signature\",\"type\":\"bytes\"}],\"name\":\"redeemWithSignature\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"redeems\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"tokenContract\",\"outputs\":[{\"internalType\":\"contract IERC20\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"methods\":{\"getAgreementHash()\":{\"details\":\"getAgreementHash\",\"return\":\"bytes32 agreementHash\"},\"initialize(address,address,address,bytes32)\":{\"details\":\"initialize\",\"params\":{\"_agreementHash\":\"is a hash of agreement required to be added to the TX by participants\",\"_avatar\":\"the avatar to mint reputation from\",\"_tokenContract\":\"the token contract\"}},\"redeem(address,bytes32)\":{\"details\":\"redeem function\",\"params\":{\"_agreementHash\":\"the agreementHash hash\",\"_beneficiary\":\"the beneficiary address to redeem for\"},\"return\":\"uint256 minted reputation\"},\"redeemWithSignature(address,bytes32,uint256,bytes)\":{\"details\":\"redeemWithSignature function\",\"params\":{\"_beneficiary\":\"the beneficiary address to redeem for\",\"_signature\":\"- signed data by the staker\",\"_signatureType\":\"signature type 1 - for web3.eth.sign 2 - for eth_signTypedData according to EIP #712.\"},\"return\":\"uint256 minted reputation\"}},\"title\":\"A scheme for reputation allocation according to token balances       This contract is assuming that the token contract is paused, and one cannot transfer its tokens.\"},\"userdoc\":{\"methods\":{}}},\"settings\":{\"compilationTarget\":{\"/Users/oren/daostack/arc/contracts/schemes/ReputationFromToken.sol\":\"ReputationFromToken\"},\"evmVersion\":\"petersburg\",\"libraries\":{},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"/Users/oren/daostack/arc/contracts/controller/Avatar.sol\":{\"keccak256\":\"0xdc75e96aca5c6aeaa3bbf97d2a3a1d305c1c168b74f1d5a6b151648e1b71086f\",\"urls\":[\"bzz-raw://425e5a7e0d27fe14af052e826a1757135afc30cf6941986dcd2c336e34c5d24c\",\"dweb:/ipfs/QmR9Jn4ZNx8LNyzSRWhdNh7rG8pccSHLX3iqdSk26VYw3R\"]},\"/Users/oren/daostack/arc/contracts/controller/Controller.sol\":{\"keccak256\":\"0x88fe5ca7618e1ed502a9665e53bfab5260282a9a7b561361ee8067af59a58f5a\",\"urls\":[\"bzz-raw://911676f75c5f83d54a7c892bb8dd39daa7b199c358536e7347ca150e815759bc\",\"dweb:/ipfs/QmT8TtonKcEgjrok8b3zUkGZQL6FEZCXFdkYMc5jV61bD6\"]},\"/Users/oren/daostack/arc/contracts/controller/DAOToken.sol\":{\"keccak256\":\"0x567235b3ec3884704725a775559a2c60b46c56d144072929035dbadeeb65e884\",\"urls\":[\"bzz-raw://8944f3ffa3f1fbc1aa6bfddf5f055a15bec79f51dcca655d5a8698aa9dfd38d4\",\"dweb:/ipfs/QmUZWJVgaXkMVMGiXAHkiETCHGptt6wCRLUiaGrzxk7Lv4\"]},\"/Users/oren/daostack/arc/contracts/globalConstraints/GlobalConstraintInterface.sol\":{\"keccak256\":\"0x83fb7666df1270aa8d857a631172b555dcf4f24fabba9a2a241d2b1ca2e574ef\",\"urls\":[\"bzz-raw://2499d07b8ba63936601c61884415a5f6848f1883e452efb608ccb181d98125e8\",\"dweb:/ipfs/QmeZCTMZ6KwJX1HLRZMMTZugskPDR6dvaNGEknEyyBePxt\"]},\"/Users/oren/daostack/arc/contracts/libs/SafeERC20.sol\":{\"keccak256\":\"0x1e91e541a9e835c05372a53eb7879e05bc47f6355602d6d3bf4bbdd8f660fc95\",\"urls\":[\"bzz-raw://ba9d1c3e68e38adc57e3097d191e7328816839ca918aff208338fb447b0792d8\",\"dweb:/ipfs/QmWisfDaqBSoYjg2U93VsZL43Lba4Ko7mbe6YS2wZpgvDR\"]},\"/Users/oren/daostack/arc/contracts/schemes/Agreement.sol\":{\"keccak256\":\"0xd2e8e2b9fb421c823706a18c929b353115427a9ad5f2b6b355f9e89fb60473d0\",\"urls\":[\"bzz-raw://8c6f10c918a96a58a2dde4137127d9891b48d5d637f567fb374e6dee6a2a9b38\",\"dweb:/ipfs/QmTKPKkHEXU2sNbU5hH4prP8GwqZ1GhJk1H9zkayRcowvq\"]},\"/Users/oren/daostack/arc/contracts/schemes/CurveInterface.sol\":{\"keccak256\":\"0x4e67086c005d04579132bf539abcf0f698a9db496a3478ce9cda6c54a379ee4c\",\"urls\":[\"bzz-raw://514910f66b7de63fa2d556211ce91550e0ab3337c8010a5b5a5e2598243a2107\",\"dweb:/ipfs/QmYycJYmPLrh5r3Uv65pACXM3Z28jSSKESFCfFqALdBi3j\"]},\"/Users/oren/daostack/arc/contracts/schemes/ReputationFromToken.sol\":{\"keccak256\":\"0xe2ad3b879e2754e4f8caccf64e6288d6f602e36504c1c58fce058bbec60ebdc3\",\"urls\":[\"bzz-raw://e1b1cc5079efaf8e140f19f78bb08fb07b06347fa7d9a25dbf965a0e1ae2e399\",\"dweb:/ipfs/QmQPf6o9xUEhSSL3EQG7EfM9qBJdTwNeXhi21ebs2xhcbL\"]},\"@daostack/infra/contracts/Reputation.sol\":{\"keccak256\":\"0xec21bc058552cae458e68fa91aad7219d11be2bc9710183696d828065f03d6ea\",\"urls\":[\"bzz-raw://a3262e0088c924072428cfe69d78c06e93cec3caeee410af8ab36eee2c8f8d66\",\"dweb:/ipfs/QmNhcQd2pxWXYJrMz8kVsZUfFVYUSgKjZCUcFseyBSjZiq\"]},\"openzeppelin-solidity/contracts/GSN/Context.sol\":{\"keccak256\":\"0x90a3995645af7562d84b9d69363ffa5ae7217714ab61e951bf7bc450f40e4061\",\"urls\":[\"bzz-raw://216ef9d6b614db4eb46970b4e84903f2534a45572dd30a79f0041f1a5830f436\",\"dweb:/ipfs/QmNPrJ4MWKUAWzKXpUqeyKRUfosaoANZAqXgvepdrCwZAG\"]},\"openzeppelin-solidity/contracts/cryptography/ECDSA.sol\":{\"keccak256\":\"0xc89ea7e48ba477b1781b24ae963442fff1bb2af33b6178dad679a3fa2f5ab2de\",\"urls\":[\"bzz-raw://b736ddad8143f8f1cd13c20809d4ebce5f5a8c7725081b0b703294078bd506d1\",\"dweb:/ipfs/QmdhTWCXFCuwG9JaPMjwnhkQoDj9su8R7KMPNvD5z9KeWD\"]},\"openzeppelin-solidity/contracts/math/SafeMath.sol\":{\"keccak256\":\"0x640b6dee7a4b830bdfd52b5031a07fc2b12209f5b2e29e5d364a7d37f69d8076\",\"urls\":[\"bzz-raw://31113152e1ddb78fe7a4197f247591ca894e93f916867beb708d8e747b6cc74f\",\"dweb:/ipfs/QmbZaJyXdpsYGykVhHH9qpVGQg9DGCxE2QufbCUy3daTgq\"]},\"openzeppelin-solidity/contracts/ownership/Ownable.sol\":{\"keccak256\":\"0xecd8ab29d9a5771c3964d0cd1788c4a5098a0081b20fb275da850a22b1c59806\",\"urls\":[\"bzz-raw://696a75bc2c55407ce8251ccc7d19ecb1b7b2be1796a160a6524312babcc7e3d4\",\"dweb:/ipfs/QmQViKEp3y99h9uhRssE29TmjBKRnFMaoz3eJZ4eggggg2\"]},\"openzeppelin-solidity/contracts/token/ERC20/ERC20.sol\":{\"keccak256\":\"0x65a4078c03875c25413a068ce9cfdd7e68a90f8786612d1189c89341e6e3b802\",\"urls\":[\"bzz-raw://45c0d95495b944fbb1aa09d900b0ab530903a432125ab8fddfa05064a7988991\",\"dweb:/ipfs/Qma2VeknkKA1THeubGzshWFk44BktXkXP1UKp9Un2uDSsu\"]},\"openzeppelin-solidity/contracts/token/ERC20/ERC20Burnable.sol\":{\"keccak256\":\"0x9b94356691f3cbf90a5d83ae3fdf6a5a662bb004d2bd8b034160d60221807e64\",\"urls\":[\"bzz-raw://14a9d33db455302b8bb9fdb28998efefbe5a1cb41b29e31391609f646b2ab351\",\"dweb:/ipfs/Qmd4wFr6GEMZnnxgXeq3gmp7cs8tqDuHp3TVNhCbjnux2V\"]},\"openzeppelin-solidity/contracts/token/ERC20/IERC20.sol\":{\"keccak256\":\"0xe5bb0f57cff3e299f360052ba50f1ea0fff046df2be070b6943e0e3c3fdad8a9\",\"urls\":[\"bzz-raw://59fd025151435da35faa8093a5c7a17de02de9d08ad27275c5cdf05050820d91\",\"dweb:/ipfs/QmQMvwEcPhoRXzbXyrdoeRtvLoifUW9Qh7Luho7bmUPRkc\"]},\"openzeppelin-solidity/contracts/utils/Address.sol\":{\"keccak256\":\"0x70df50e240407aa50915ad14f61b1a901fa335b37de20955b99ed647be756af0\",\"urls\":[\"bzz-raw://9404711f3206610c08ea97fa52c7b6b4d2e9d536e96fc4b7210aa7e24f796c36\",\"dweb:/ipfs/QmZDzpVzjoap13SuPEq5pVCrmdjoKVZnTsQPLKXAbynTTW\"]}},\"version\":1}","sourceMap":"501:4291:21:-;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;501:4291:21;;;;;;;","deployedSourceMap":"501:4291:21:-;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;501:4291:21;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;903:184;;;:::i;:::-;;;;;;;;;;;;;;;;709:43;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;709:43:21;-1:-1:-1;;;;;709:43:21;;:::i;:::-;;;;;;;;;;;;;;;;;;611:27;;;:::i;:::-;;;;-1:-1:-1;;;;;611:27:21;;;;;;;;;;;;;;2560:1164;;;;;;13:3:-1;8;5:12;2:2;;;30:1;27;20:12;2:2;-1:-1;;;;;2560:1164:21;;;;;;;;;;;;;;;;;;;;;;;;;21:11:-1;5:28;;2:2;;;46:1;43;36:12;2:2;2560:1164:21;;35:9:-1;28:4;12:14;8:25;5:40;2:2;;;58:1;55;48:12;2:2;2560:1164:21;;;;;;100:9:-1;95:1;81:12;77:20;67:8;63:35;60:50;39:11;25:12;22:29;11:107;8:2;;;131:1;128;121:12;8:2;-1:-1;2560:1164:21;;-1:-1:-1;2560:1164:21;-1:-1:-1;2560:1164:21;:::i;758:20::-;;;:::i;1428:397::-;;;;;;13:3:-1;8;5:12;2:2;;;30:1;27;20:12;2:2;-1:-1;;;;;;1428:397:21;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;407:101:7;;;:::i;644:27:21:-;;;:::i;2033:161::-;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;;;;;;2033:161:21;;;;;;;;:::i;903:184::-;966:120;;;;;;;;;-1:-1:-1;;;966:120:21;;;;-1:-1:-1;;;966:120:21;;;;;;;22:32:-1;26:21;;;22:32;6:49;;966:120:21;;;;;;956:131;;49:4:-1;956:131:21;;;;;-1:-1:-1;903:184:21;:::o;709:43::-;;;;;;;;;;;;;;;:::o;611:27::-;;;-1:-1:-1;;;;;611:27:21;;:::o;2560:1164::-;2761:7;2835:24;2873:14;2891:1;2873:19;2869:647;;;966:120;;;;;;;;;-1:-1:-1;;;966:120:21;;;;-1:-1:-1;;;966:120:21;;;;;;;26:21:-1;;;22:32;;6:49;;966:120:21;;;;;956:131;;49:4:-1;956:131:21;;;;3101:4;3051:134;;;;;;;;;;;-1:-1:-1;;3051:134:21;;;;;;;;;;;;;;26:21:-1;;;22:32;;;6:49;;3051:134:21;;;;;3016:191;;;;;;2954:271;;;;;;;;;;;;;;;;;26:21:-1;;;22:32;;;6:49;;2954:271:21;;;;;;;2927:312;;;;;;-1:-1:-1;2869:647:21;;-1:-1:-1;2869:647:21;;3289:216;3374:4;3405:12;3443:14;3324:134;;;;;;-1:-1:-1;;;;;3324:134:21;-1:-1:-1;;;;;3324:134:21;;;;;;;;-1:-1:-1;;;;;3324:134:21;-1:-1:-1;;;;;3324:134:21;;;;;;;;;;;;;;;;;;;49:4:-1;39:7;30;26:21;22:32;13:7;6:49;3324:134:21;;;3289:191;;;;;;:214;:216::i;:::-;3270:235;;2869:647;3525:16;3544:36;3569:10;;3544:36;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;30:3:-1;22:6;14;1:33;99:1;81:16;;74:27;;;;-1:-1;3544:16:21;;:36;-1:-1:-1;;3544:36:21;:24;:36;;-1:-1:-1;3544:36:21:i;:::-;3525:55;-1:-1:-1;;;;;;3598:22:21;;3590:63;;;;;-1:-1:-1;;;3590:63:21;;;;;;;;;;;;;;;;;;;;;;;;;;;;3670:47;3678:12;3692:8;3702:14;3670:7;:47::i;:::-;3663:54;2560:1164;-1:-1:-1;;;;;;;;2560:1164:21:o;758:20::-;;;-1:-1:-1;;;;;758:20:21;;:::o;1428:397::-;1565:6;;-1:-1:-1;;;;;1565:6:21;:19;1557:59;;;;;-1:-1:-1;;;1557:59:21;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;1634:20:21;;1626:54;;;;;-1:-1:-1;;;1626:54:21;;;;;;;;;;;;-1:-1:-1;;;1626:54:21;;;;;;;;;;;;;;;1690:13;:30;;-1:-1:-1;;;;;1690:30:21;;;-1:-1:-1;;;;;;1690:30:21;;;;;;;1730:6;:16;;;;;;;;;;;1756:5;:14;;;;;;;;;;;;;;;1780:38;1803:14;1780:22;:38::i;:::-;1428:397;;;;:::o;407:101:7:-;458:7;488:13;407:101;:::o;644:27:21:-;;;-1:-1:-1;;;;;644:27:21;;:::o;2033:161::-;2112:7;2138:49;2146:12;2160:10;2172:14;2138:7;:49::i;:::-;2131:56;;2033:161;;;;;:::o;3381:265:63:-;3580:58;;;;;;;;;;;;;;;;;;;;;;26:21:-1;;;22:32;;;6:49;;3580:58:63;;;;;;;3570:69;;;;;;3381:265::o;1226:1891::-;1304:7;1365:9;:16;1385:2;1365:22;1361:72;;-1:-1:-1;1419:1:63;1403:19;;1361:72;1783:4;1768:20;;1762:27;1828:4;1813:20;;1807:27;1881:4;1866:20;;1860:27;1499:9;1852:36;2799:66;2786:79;;2782:127;;;2896:1;2881:17;;;;;;;2782:127;2923:1;:7;;2928:2;2923:7;;:18;;;;;2934:1;:7;;2939:2;2934:7;;2923:18;2919:66;;;2972:1;2957:17;;;;;;;2919:66;3086:24;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;3086:24:63;;;;;;;;;;;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;-1:-1;;3086:24:63;;-1:-1:-1;;3086:24:63;;;1226:1891;-1:-1:-1;;;;;;;1226:1891:63:o;3925:865:21:-;4061:7;4033:14;243:13:7;;225:14;:31;217:84;;;;-1:-1:-1;;;217:84:7;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4088:6:21;;-1:-1:-1;;;;;4088:6:21;4080:55;;;;;-1:-1:-1;;;4080:55:21;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;4153:18:21;;;;;;:7;:18;;;;;;;;:27;4145:92;;;;-1:-1:-1;;;4145:92:21;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;4247:18:21;;;;;;;:7;:18;;;;;;;;:25;;-1:-1:-1;;4247:25:21;4268:4;4247:25;;;;;;4304:13;:34;;-1:-1:-1;;;4304:34:21;;;;;;;;;;;4247:18;;4304:13;;:23;;:34;;;;;4247:18;4304:34;;;;;:13;:34;;;5:2:-1;;;;30:1;27;20:12;5:2;4304:34:21;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;4304:34:21;;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;4304:34:21;4352:5;;4304:34;;-1:-1:-1;;;;;;4352:5:21;:26;4348:94;;4408:5;;:23;;;-1:-1:-1;;;4408:23:21;;;;;;;;;;-1:-1:-1;;;;;4408:5:21;;;;:10;;:23;;;;;;;;;;;;;;;:5;:23;;;5:2:-1;;;;30:1;27;20:12;5:2;4408:23:21;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;4408:23:21;;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;4408:23:21;;-1:-1:-1;4348:94:21;-1:-1:-1;;;;;4455:26:21;;4451:81;;4512:9;4497:24;;4451:81;4578:6;;;:14;;;-1:-1:-1;;;4578:14:21;;;;-1:-1:-1;;;;;4578:6:21;;;;:12;;:14;;;;;;;;;;;;:6;:14;;;5:2:-1;;;;30:1;27;20:12;5:2;4578:14:21;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;4578:14:21;;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;4578:14:21;4653:6;;;4558:103;;;-1:-1:-1;;;4558:103:21;;;;;;;;-1:-1:-1;;;;;4558:103:21;;;;;;;4653:6;;;4558:103;;;;;:59;;;;;:103;;;;;4578:14;;4558:103;;;;;;;;4653:6;4558:59;:103;;;5:2:-1;;;;30:1;27;20:12;5:2;4558:103:21;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;4558:103:21;;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;4558:103:21;4541:155;;;;;-1:-1:-1;;;4541:155:21;;;;;;;;;;;;;;;;;;;;;;;;;;;;4732:9;-1:-1:-1;;;;;4711:44:21;4718:12;-1:-1:-1;;;;;4711:44:21;;4743:11;4711:44;;;;;;;;;;;;;;;;;;4772:11;3925:865;-1:-1:-1;;;;;3925:865:21:o;658:187:7:-;764:1;739:13;:27;731:67;;;;;-1:-1:-1;;;731:67:7;;;;;;;;;;;;;;;;;;;;;;;;;;;;808:13;:30;658:187::o","source":"pragma solidity 0.5.13;\n\nimport \"../controller/Controller.sol\";\nimport \"openzeppelin-solidity/contracts/token/ERC20/IERC20.sol\";\nimport \"./CurveInterface.sol\";\nimport \"openzeppelin-solidity/contracts/cryptography/ECDSA.sol\";\nimport \"openzeppelin-solidity/contracts/math/SafeMath.sol\";\nimport \"./Agreement.sol\";\n\n/**\n * @title A scheme for reputation allocation according to token balances\n *        This contract is assuming that the token contract is paused, and one cannot transfer its tokens.\n */\n\ncontract ReputationFromToken is Agreement {\n    using ECDSA for bytes32;\n    using SafeMath for uint256;\n\n    IERC20 public tokenContract;\n    CurveInterface public curve;\n    //      beneficiary -> bool\n    mapping(address     => bool) public redeems;\n    Avatar public avatar;\n\n    // Digest describing the data the user signs according EIP 712.\n    // Needs to match what is passed to Metamask.\n    bytes32 public constant DELEGATION_HASH_EIP712 =\n    keccak256(abi.encodePacked(\n    \"address ReputationFromTokenAddress\",\n    \"address Beneficiary\",\n    \"bytes32 AgreementHash\"\n    ));\n\n    event Redeem(address indexed _beneficiary, address indexed _sender, uint256 _amount);\n\n    /**\n     * @dev initialize\n     * @param _avatar the avatar to mint reputation from\n     * @param _tokenContract the token contract\n     * @param _agreementHash is a hash of agreement required to be added to the TX by participants\n     */\n    function initialize(Avatar _avatar, IERC20 _tokenContract, CurveInterface _curve, bytes32 _agreementHash) external\n    {\n        require(avatar == Avatar(0), \"can be called only one time\");\n        require(_avatar != Avatar(0), \"avatar cannot be zero\");\n        tokenContract = _tokenContract;\n        avatar = _avatar;\n        curve = _curve;\n        super.setAgreementHash(_agreementHash);\n    }\n\n    /**\n     * @dev redeem function\n     * @param _beneficiary the beneficiary address to redeem for\n     * @param _agreementHash the agreementHash hash\n     * @return uint256 minted reputation\n     */\n    function redeem(address _beneficiary, bytes32 _agreementHash) external returns(uint256) {\n        return _redeem(_beneficiary, msg.sender, _agreementHash);\n    }\n\n    /**\n     * @dev redeemWithSignature function\n     * @param _beneficiary the beneficiary address to redeem for\n     * @param _signatureType signature type\n              1 - for web3.eth.sign\n              2 - for eth_signTypedData according to EIP #712.\n     * @param _signature  - signed data by the staker\n     * @return uint256 minted reputation\n     */\n    function redeemWithSignature(\n        address _beneficiary,\n        bytes32 _agreementHash,\n        uint256 _signatureType,\n        bytes calldata _signature\n        )\n        external\n        returns(uint256)\n        {\n        // Recreate the digest the user signed\n        bytes32 delegationDigest;\n        if (_signatureType == 2) {\n            delegationDigest = keccak256(\n                abi.encodePacked(\n                    DELEGATION_HASH_EIP712, keccak256(\n                        abi.encodePacked(\n                        address(this),\n                        _beneficiary,\n                        _agreementHash)\n                    )\n                )\n            );\n        } else {\n            delegationDigest = keccak256(\n                        abi.encodePacked(\n                        address(this),\n                        _beneficiary,\n                        _agreementHash)\n                    ).toEthSignedMessageHash();\n        }\n        address redeemer = delegationDigest.recover(_signature);\n        require(redeemer != address(0), \"redeemer address cannot be 0\");\n        return _redeem(_beneficiary, redeemer, _agreementHash);\n    }\n\n    /**\n     * @dev redeem function\n     * @param _beneficiary the beneficiary address to redeem for\n     * @param _redeemer the redeemer address\n     * @return uint256 minted reputation\n     */\n    function _redeem(address _beneficiary, address _redeemer, bytes32 _agreementHash)\n    private\n    onlyAgree(_agreementHash)\n    returns(uint256) {\n        require(avatar != Avatar(0), \"should initialize first\");\n        require(redeems[_redeemer] == false, \"redeeming twice from the same account is not allowed\");\n        redeems[_redeemer] = true;\n        uint256 tokenAmount = tokenContract.balanceOf(_redeemer);\n        if (curve != CurveInterface(0)) {\n            tokenAmount = curve.calc(tokenAmount);\n        }\n        if (_beneficiary == address(0)) {\n            _beneficiary = _redeemer;\n        }\n        require(\n        Controller(\n        avatar.owner())\n        .mintReputation(tokenAmount, _beneficiary, address(avatar)), \"mint reputation should succeed\");\n        emit Redeem(_beneficiary, _redeemer, tokenAmount);\n        return tokenAmount;\n    }\n}\n","sourcePath":"/Users/oren/daostack/arc/contracts/schemes/ReputationFromToken.sol","ast":{"absolutePath":"/Users/oren/daostack/arc/contracts/schemes/ReputationFromToken.sol","exportedSymbols":{"ReputationFromToken":[7983]},"id":7984,"nodeType":"SourceUnit","nodes":[{"id":7701,"literals":["solidity","0.5",".13"],"nodeType":"PragmaDirective","src":"0:23:21"},{"absolutePath":"/Users/oren/daostack/arc/contracts/controller/Controller.sol","file":"../controller/Controller.sol","id":7702,"nodeType":"ImportDirective","scope":7984,"sourceUnit":1798,"src":"25:38:21","symbolAliases":[],"unitAlias":""},{"absolutePath":"openzeppelin-solidity/contracts/token/ERC20/IERC20.sol","file":"openzeppelin-solidity/contracts/token/ERC20/IERC20.sol","id":7703,"nodeType":"ImportDirective","scope":7984,"sourceUnit":20581,"src":"64:64:21","symbolAliases":[],"unitAlias":""},{"absolutePath":"/Users/oren/daostack/arc/contracts/schemes/CurveInterface.sol","file":"./CurveInterface.sol","id":7704,"nodeType":"ImportDirective","scope":7984,"sourceUnit":6143,"src":"129:30:21","symbolAliases":[],"unitAlias":""},{"absolutePath":"openzeppelin-solidity/contracts/cryptography/ECDSA.sol","file":"openzeppelin-solidity/contracts/cryptography/ECDSA.sol","id":7705,"nodeType":"ImportDirective","scope":7984,"sourceUnit":19703,"src":"160:64:21","symbolAliases":[],"unitAlias":""},{"absolutePath":"openzeppelin-solidity/contracts/math/SafeMath.sol","file":"openzeppelin-solidity/contracts/math/SafeMath.sol","id":7706,"nodeType":"ImportDirective","scope":7984,"sourceUnit":19959,"src":"225:59:21","symbolAliases":[],"unitAlias":""},{"absolutePath":"/Users/oren/daostack/arc/contracts/schemes/Agreement.sol","file":"./Agreement.sol","id":7707,"nodeType":"ImportDirective","scope":7984,"sourceUnit":2303,"src":"285:25:21","symbolAliases":[],"unitAlias":""},{"baseContracts":[{"arguments":null,"baseName":{"contractScope":null,"id":7708,"name":"Agreement","nodeType":"UserDefinedTypeName","referencedDeclaration":2302,"src":"533:9:21","typeDescriptions":{"typeIdentifier":"t_contract$_Agreement_$2302","typeString":"contract Agreement"}},"id":7709,"nodeType":"InheritanceSpecifier","src":"533:9:21"}],"contractDependencies":[2302],"contractKind":"contract","documentation":"@title A scheme for reputation allocation according to token balances\n       This contract is assuming that the token contract is paused, and one cannot transfer its tokens.","fullyImplemented":true,"id":7983,"linearizedBaseContracts":[7983,2302],"name":"ReputationFromToken","nodeType":"ContractDefinition","nodes":[{"id":7712,"libraryName":{"contractScope":null,"id":7710,"name":"ECDSA","nodeType":"UserDefinedTypeName","referencedDeclaration":19702,"src":"555:5:21","typeDescriptions":{"typeIdentifier":"t_contract$_ECDSA_$19702","typeString":"library ECDSA"}},"nodeType":"UsingForDirective","src":"549:24:21","typeName":{"id":7711,"name":"bytes32","nodeType":"ElementaryTypeName","src":"565:7:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}},{"id":7715,"libraryName":{"contractScope":null,"id":7713,"name":"SafeMath","nodeType":"UserDefinedTypeName","referencedDeclaration":19958,"src":"584:8:21","typeDescriptions":{"typeIdentifier":"t_contract$_SafeMath_$19958","typeString":"library SafeMath"}},"nodeType":"UsingForDirective","src":"578:27:21","typeName":{"id":7714,"name":"uint256","nodeType":"ElementaryTypeName","src":"597:7:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}},{"constant":false,"id":7717,"name":"tokenContract","nodeType":"VariableDeclaration","scope":7983,"src":"611:27:21","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$20580","typeString":"contract IERC20"},"typeName":{"contractScope":null,"id":7716,"name":"IERC20","nodeType":"UserDefinedTypeName","referencedDeclaration":20580,"src":"611:6:21","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$20580","typeString":"contract IERC20"}},"value":null,"visibility":"public"},{"constant":false,"id":7719,"name":"curve","nodeType":"VariableDeclaration","scope":7983,"src":"644:27:21","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6142","typeString":"contract CurveInterface"},"typeName":{"contractScope":null,"id":7718,"name":"CurveInterface","nodeType":"UserDefinedTypeName","referencedDeclaration":6142,"src":"644:14:21","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6142","typeString":"contract CurveInterface"}},"value":null,"visibility":"public"},{"constant":false,"id":7723,"name":"redeems","nodeType":"VariableDeclaration","scope":7983,"src":"709:43:21","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"},"typeName":{"id":7722,"keyType":{"id":7720,"name":"address","nodeType":"ElementaryTypeName","src":"717:7:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Mapping","src":"709:28:21","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"},"valueType":{"id":7721,"name":"bool","nodeType":"ElementaryTypeName","src":"732:4:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}},"value":null,"visibility":"public"},{"constant":false,"id":7725,"name":"avatar","nodeType":"VariableDeclaration","scope":7983,"src":"758:20:21","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"},"typeName":{"contractScope":null,"id":7724,"name":"Avatar","nodeType":"UserDefinedTypeName","referencedDeclaration":337,"src":"758:6:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"value":null,"visibility":"public"},{"constant":true,"id":7735,"name":"DELEGATION_HASH_EIP712","nodeType":"VariableDeclaration","scope":7983,"src":"903:184:21","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":7726,"name":"bytes32","nodeType":"ElementaryTypeName","src":"903:7:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"616464726573732052657075746174696f6e46726f6d546f6b656e41646472657373","id":7730,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"988:36:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_855db04103fa88678d4ec68f8cee807e4ac4992d181ce035ea624bb0c8be6f9b","typeString":"literal_string \"address ReputationFromTokenAddress\""},"value":"address ReputationFromTokenAddress"},{"argumentTypes":null,"hexValue":"616464726573732042656e6566696369617279","id":7731,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1030:21:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_8aac3dc7c972743a7a51b31820c9f35652dfa57834e4a271cc7863f813cc828b","typeString":"literal_string \"address Beneficiary\""},"value":"address Beneficiary"},{"argumentTypes":null,"hexValue":"627974657333322041677265656d656e7448617368","id":7732,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1057:23:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_107fb6aab0fa542db1d44d9749a8fad7ef143f4965ce62a52ce5c96a8febadad","typeString":"literal_string \"bytes32 AgreementHash\""},"value":"bytes32 AgreementHash"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_stringliteral_855db04103fa88678d4ec68f8cee807e4ac4992d181ce035ea624bb0c8be6f9b","typeString":"literal_string \"address ReputationFromTokenAddress\""},{"typeIdentifier":"t_stringliteral_8aac3dc7c972743a7a51b31820c9f35652dfa57834e4a271cc7863f813cc828b","typeString":"literal_string \"address Beneficiary\""},{"typeIdentifier":"t_stringliteral_107fb6aab0fa542db1d44d9749a8fad7ef143f4965ce62a52ce5c96a8febadad","typeString":"literal_string \"bytes32 AgreementHash\""}],"expression":{"argumentTypes":null,"id":7728,"name":"abi","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20657,"src":"966:3:21","typeDescriptions":{"typeIdentifier":"t_magic_abi","typeString":"abi"}},"id":7729,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberName":"encodePacked","nodeType":"MemberAccess","referencedDeclaration":null,"src":"966:16:21","typeDescriptions":{"typeIdentifier":"t_function_abiencodepacked_pure$__$returns$_t_bytes_memory_ptr_$","typeString":"function () pure returns (bytes memory)"}},"id":7733,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"966:120:21","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":7727,"name":"keccak256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20664,"src":"956:9:21","typeDescriptions":{"typeIdentifier":"t_function_keccak256_pure$_t_bytes_memory_ptr_$returns$_t_bytes32_$","typeString":"function (bytes memory) pure returns (bytes32)"}},"id":7734,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"956:131:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"public"},{"anonymous":false,"documentation":null,"id":7743,"name":"Redeem","nodeType":"EventDefinition","parameters":{"id":7742,"nodeType":"ParameterList","parameters":[{"constant":false,"id":7737,"indexed":true,"name":"_beneficiary","nodeType":"VariableDeclaration","scope":7743,"src":"1107:28:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":7736,"name":"address","nodeType":"ElementaryTypeName","src":"1107:7:21","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":7739,"indexed":true,"name":"_sender","nodeType":"VariableDeclaration","scope":7743,"src":"1137:23:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":7738,"name":"address","nodeType":"ElementaryTypeName","src":"1137:7:21","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":7741,"indexed":false,"name":"_amount","nodeType":"VariableDeclaration","scope":7743,"src":"1162:15:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":7740,"name":"uint256","nodeType":"ElementaryTypeName","src":"1162:7:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"1106:72:21"},"src":"1094:85:21"},{"body":{"id":7790,"nodeType":"Block","src":"1547:278:21","statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"},"id":7759,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":7755,"name":"avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7725,"src":"1565:6:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":7757,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1582:1:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":7756,"name":"Avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":337,"src":"1575:6:21","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Avatar_$337_$","typeString":"type(contract Avatar)"}},"id":7758,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1575:9:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"src":"1565:19:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"63616e2062652063616c6c6564206f6e6c79206f6e652074696d65","id":7760,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1586:29:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_61459d8c2e83c03ac4ccaf4013950b2282c585e1eb42ab84ceae1eecfe85edd8","typeString":"literal_string \"can be called only one time\""},"value":"can be called only one time"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_61459d8c2e83c03ac4ccaf4013950b2282c585e1eb42ab84ceae1eecfe85edd8","typeString":"literal_string \"can be called only one time\""}],"id":7754,"name":"require","nodeType":"Identifier","overloadedDeclarations":[20673,20674],"referencedDeclaration":20674,"src":"1557:7:21","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":7761,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1557:59:21","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":7762,"nodeType":"ExpressionStatement","src":"1557:59:21"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"},"id":7768,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":7764,"name":"_avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7745,"src":"1634:7:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":7766,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1652:1:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":7765,"name":"Avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":337,"src":"1645:6:21","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Avatar_$337_$","typeString":"type(contract Avatar)"}},"id":7767,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1645:9:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"src":"1634:20:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"6176617461722063616e6e6f74206265207a65726f","id":7769,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1656:23:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_3338e04ce106ab83a89a6f78ac95362796c47f8acb99702d3b473607a80d58e0","typeString":"literal_string \"avatar cannot be zero\""},"value":"avatar cannot be zero"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_3338e04ce106ab83a89a6f78ac95362796c47f8acb99702d3b473607a80d58e0","typeString":"literal_string \"avatar cannot be zero\""}],"id":7763,"name":"require","nodeType":"Identifier","overloadedDeclarations":[20673,20674],"referencedDeclaration":20674,"src":"1626:7:21","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":7770,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1626:54:21","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":7771,"nodeType":"ExpressionStatement","src":"1626:54:21"},{"expression":{"argumentTypes":null,"id":7774,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":7772,"name":"tokenContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7717,"src":"1690:13:21","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$20580","typeString":"contract IERC20"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"id":7773,"name":"_tokenContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7747,"src":"1706:14:21","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$20580","typeString":"contract IERC20"}},"src":"1690:30:21","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$20580","typeString":"contract IERC20"}},"id":7775,"nodeType":"ExpressionStatement","src":"1690:30:21"},{"expression":{"argumentTypes":null,"id":7778,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":7776,"name":"avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7725,"src":"1730:6:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"id":7777,"name":"_avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7745,"src":"1739:7:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"src":"1730:16:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"id":7779,"nodeType":"ExpressionStatement","src":"1730:16:21"},{"expression":{"argumentTypes":null,"id":7782,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":7780,"name":"curve","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7719,"src":"1756:5:21","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6142","typeString":"contract CurveInterface"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"id":7781,"name":"_curve","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7749,"src":"1764:6:21","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6142","typeString":"contract CurveInterface"}},"src":"1756:14:21","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6142","typeString":"contract CurveInterface"}},"id":7783,"nodeType":"ExpressionStatement","src":"1756:14:21"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7787,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7751,"src":"1803:14:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"argumentTypes":null,"id":7784,"name":"super","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20765,"src":"1780:5:21","typeDescriptions":{"typeIdentifier":"t_super$_ReputationFromToken_$7983","typeString":"contract super ReputationFromToken"}},"id":7786,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"setAgreementHash","nodeType":"MemberAccess","referencedDeclaration":2301,"src":"1780:22:21","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_bytes32_$returns$__$","typeString":"function (bytes32)"}},"id":7788,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1780:38:21","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":7789,"nodeType":"ExpressionStatement","src":"1780:38:21"}]},"documentation":"@dev initialize\n@param _avatar the avatar to mint reputation from\n@param _tokenContract the token contract\n@param _agreementHash is a hash of agreement required to be added to the TX by participants","id":7791,"implemented":true,"kind":"function","modifiers":[],"name":"initialize","nodeType":"FunctionDefinition","parameters":{"id":7752,"nodeType":"ParameterList","parameters":[{"constant":false,"id":7745,"name":"_avatar","nodeType":"VariableDeclaration","scope":7791,"src":"1448:14:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"},"typeName":{"contractScope":null,"id":7744,"name":"Avatar","nodeType":"UserDefinedTypeName","referencedDeclaration":337,"src":"1448:6:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"value":null,"visibility":"internal"},{"constant":false,"id":7747,"name":"_tokenContract","nodeType":"VariableDeclaration","scope":7791,"src":"1464:21:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$20580","typeString":"contract IERC20"},"typeName":{"contractScope":null,"id":7746,"name":"IERC20","nodeType":"UserDefinedTypeName","referencedDeclaration":20580,"src":"1464:6:21","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$20580","typeString":"contract IERC20"}},"value":null,"visibility":"internal"},{"constant":false,"id":7749,"name":"_curve","nodeType":"VariableDeclaration","scope":7791,"src":"1487:21:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6142","typeString":"contract CurveInterface"},"typeName":{"contractScope":null,"id":7748,"name":"CurveInterface","nodeType":"UserDefinedTypeName","referencedDeclaration":6142,"src":"1487:14:21","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6142","typeString":"contract CurveInterface"}},"value":null,"visibility":"internal"},{"constant":false,"id":7751,"name":"_agreementHash","nodeType":"VariableDeclaration","scope":7791,"src":"1510:22:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":7750,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1510:7:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"src":"1447:86:21"},"returnParameters":{"id":7753,"nodeType":"ParameterList","parameters":[],"src":"1547:0:21"},"scope":7983,"src":"1428:397:21","stateMutability":"nonpayable","superFunction":null,"visibility":"external"},{"body":{"id":7807,"nodeType":"Block","src":"2121:73:21","statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7801,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7793,"src":"2146:12:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"expression":{"argumentTypes":null,"id":7802,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20670,"src":"2160:3:21","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":7803,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"sender","nodeType":"MemberAccess","referencedDeclaration":null,"src":"2160:10:21","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},{"argumentTypes":null,"id":7804,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7795,"src":"2172:14:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address_payable","typeString":"address payable"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"id":7800,"name":"_redeem","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7982,"src":"2138:7:21","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_address_$_t_address_$_t_bytes32_$returns$_t_uint256_$","typeString":"function (address,address,bytes32) returns (uint256)"}},"id":7805,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2138:49:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":7799,"id":7806,"nodeType":"Return","src":"2131:56:21"}]},"documentation":"@dev redeem function\n@param _beneficiary the beneficiary address to redeem for\n@param _agreementHash the agreementHash hash\n@return uint256 minted reputation","id":7808,"implemented":true,"kind":"function","modifiers":[],"name":"redeem","nodeType":"FunctionDefinition","parameters":{"id":7796,"nodeType":"ParameterList","parameters":[{"constant":false,"id":7793,"name":"_beneficiary","nodeType":"VariableDeclaration","scope":7808,"src":"2049:20:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":7792,"name":"address","nodeType":"ElementaryTypeName","src":"2049:7:21","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":7795,"name":"_agreementHash","nodeType":"VariableDeclaration","scope":7808,"src":"2071:22:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":7794,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2071:7:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"src":"2048:46:21"},"returnParameters":{"id":7799,"nodeType":"ParameterList","parameters":[{"constant":false,"id":7798,"name":"","nodeType":"VariableDeclaration","scope":7808,"src":"2112:7:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":7797,"name":"uint256","nodeType":"ElementaryTypeName","src":"2112:7:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"2111:9:21"},"scope":7983,"src":"2033:161:21","stateMutability":"nonpayable","superFunction":null,"visibility":"external"},{"body":{"id":7886,"nodeType":"Block","src":"2778:946:21","statements":[{"assignments":[7822],"declarations":[{"constant":false,"id":7822,"name":"delegationDigest","nodeType":"VariableDeclaration","scope":7886,"src":"2835:24:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":7821,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2835:7:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"id":7823,"initialValue":null,"nodeType":"VariableDeclarationStatement","src":"2835:24:21"},{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":7826,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":7824,"name":"_signatureType","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7814,"src":"2873:14:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"argumentTypes":null,"hexValue":"32","id":7825,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2891:1:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"src":"2873:19:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":7862,"nodeType":"Block","src":"3256:260:21","statements":[{"expression":{"argumentTypes":null,"id":7860,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":7847,"name":"delegationDigest","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7822,"src":"3270:16:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"arguments":[],"expression":{"argumentTypes":[],"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7852,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20764,"src":"3374:4:21","typeDescriptions":{"typeIdentifier":"t_contract$_ReputationFromToken_$7983","typeString":"contract ReputationFromToken"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_ReputationFromToken_$7983","typeString":"contract ReputationFromToken"}],"id":7851,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3366:7:21","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":7853,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3366:13:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":7854,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7810,"src":"3405:12:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":7855,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7812,"src":"3443:14:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"argumentTypes":null,"id":7849,"name":"abi","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20657,"src":"3324:3:21","typeDescriptions":{"typeIdentifier":"t_magic_abi","typeString":"abi"}},"id":7850,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberName":"encodePacked","nodeType":"MemberAccess","referencedDeclaration":null,"src":"3324:16:21","typeDescriptions":{"typeIdentifier":"t_function_abiencodepacked_pure$__$returns$_t_bytes_memory_ptr_$","typeString":"function () pure returns (bytes memory)"}},"id":7856,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3324:134:21","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":7848,"name":"keccak256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20664,"src":"3289:9:21","typeDescriptions":{"typeIdentifier":"t_function_keccak256_pure$_t_bytes_memory_ptr_$returns$_t_bytes32_$","typeString":"function (bytes memory) pure returns (bytes32)"}},"id":7857,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3289:191:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":7858,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"toEthSignedMessageHash","nodeType":"MemberAccess","referencedDeclaration":19701,"src":"3289:214:21","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_bytes32_$returns$_t_bytes32_$bound_to$_t_bytes32_$","typeString":"function (bytes32) pure returns (bytes32)"}},"id":7859,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3289:216:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"3270:235:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":7861,"nodeType":"ExpressionStatement","src":"3270:235:21"}]},"id":7863,"nodeType":"IfStatement","src":"2869:647:21","trueBody":{"id":7846,"nodeType":"Block","src":"2894:356:21","statements":[{"expression":{"argumentTypes":null,"id":7844,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":7827,"name":"delegationDigest","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7822,"src":"2908:16:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7831,"name":"DELEGATION_HASH_EIP712","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7735,"src":"2992:22:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7836,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20764,"src":"3101:4:21","typeDescriptions":{"typeIdentifier":"t_contract$_ReputationFromToken_$7983","typeString":"contract ReputationFromToken"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_ReputationFromToken_$7983","typeString":"contract ReputationFromToken"}],"id":7835,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3093:7:21","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":7837,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3093:13:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":7838,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7810,"src":"3132:12:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":7839,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7812,"src":"3170:14:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"argumentTypes":null,"id":7833,"name":"abi","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20657,"src":"3051:3:21","typeDescriptions":{"typeIdentifier":"t_magic_abi","typeString":"abi"}},"id":7834,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberName":"encodePacked","nodeType":"MemberAccess","referencedDeclaration":null,"src":"3051:16:21","typeDescriptions":{"typeIdentifier":"t_function_abiencodepacked_pure$__$returns$_t_bytes_memory_ptr_$","typeString":"function () pure returns (bytes memory)"}},"id":7840,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3051:134:21","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":7832,"name":"keccak256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20664,"src":"3016:9:21","typeDescriptions":{"typeIdentifier":"t_function_keccak256_pure$_t_bytes_memory_ptr_$returns$_t_bytes32_$","typeString":"function (bytes memory) pure returns (bytes32)"}},"id":7841,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3016:191:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"argumentTypes":null,"id":7829,"name":"abi","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20657,"src":"2954:3:21","typeDescriptions":{"typeIdentifier":"t_magic_abi","typeString":"abi"}},"id":7830,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberName":"encodePacked","nodeType":"MemberAccess","referencedDeclaration":null,"src":"2954:16:21","typeDescriptions":{"typeIdentifier":"t_function_abiencodepacked_pure$__$returns$_t_bytes_memory_ptr_$","typeString":"function () pure returns (bytes memory)"}},"id":7842,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2954:271:21","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":7828,"name":"keccak256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20664,"src":"2927:9:21","typeDescriptions":{"typeIdentifier":"t_function_keccak256_pure$_t_bytes_memory_ptr_$returns$_t_bytes32_$","typeString":"function (bytes memory) pure returns (bytes32)"}},"id":7843,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2927:312:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"2908:331:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":7845,"nodeType":"ExpressionStatement","src":"2908:331:21"}]}},{"assignments":[7865],"declarations":[{"constant":false,"id":7865,"name":"redeemer","nodeType":"VariableDeclaration","scope":7886,"src":"3525:16:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":7864,"name":"address","nodeType":"ElementaryTypeName","src":"3525:7:21","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"}],"id":7870,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7868,"name":"_signature","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7816,"src":"3569:10:21","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes calldata"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes calldata"}],"expression":{"argumentTypes":null,"id":7866,"name":"delegationDigest","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7822,"src":"3544:16:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":7867,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"recover","nodeType":"MemberAccess","referencedDeclaration":19685,"src":"3544:24:21","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_bytes32_$_t_bytes_memory_ptr_$returns$_t_address_$bound_to$_t_bytes32_$","typeString":"function (bytes32,bytes memory) pure returns (address)"}},"id":7869,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3544:36:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"VariableDeclarationStatement","src":"3525:55:21"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":7876,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":7872,"name":"redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7865,"src":"3598:8:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":7874,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3618:1:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":7873,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3610:7:21","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":7875,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3610:10:21","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"src":"3598:22:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"72656465656d657220616464726573732063616e6e6f742062652030","id":7877,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"3622:30:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_1dd1a9b2ffbe0d1ded5d8e7625b440be45642c5f735dba078df15bf3dbdffb59","typeString":"literal_string \"redeemer address cannot be 0\""},"value":"redeemer address cannot be 0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_1dd1a9b2ffbe0d1ded5d8e7625b440be45642c5f735dba078df15bf3dbdffb59","typeString":"literal_string \"redeemer address cannot be 0\""}],"id":7871,"name":"require","nodeType":"Identifier","overloadedDeclarations":[20673,20674],"referencedDeclaration":20674,"src":"3590:7:21","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":7878,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3590:63:21","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":7879,"nodeType":"ExpressionStatement","src":"3590:63:21"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7881,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7810,"src":"3678:12:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":7882,"name":"redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7865,"src":"3692:8:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":7883,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7812,"src":"3702:14:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"id":7880,"name":"_redeem","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7982,"src":"3670:7:21","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_address_$_t_address_$_t_bytes32_$returns$_t_uint256_$","typeString":"function (address,address,bytes32) returns (uint256)"}},"id":7884,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3670:47:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":7820,"id":7885,"nodeType":"Return","src":"3663:54:21"}]},"documentation":"@dev redeemWithSignature function\n@param _beneficiary the beneficiary address to redeem for\n@param _signatureType signature type\n1 - for web3.eth.sign\n2 - for eth_signTypedData according to EIP #712.\n@param _signature  - signed data by the staker\n@return uint256 minted reputation","id":7887,"implemented":true,"kind":"function","modifiers":[],"name":"redeemWithSignature","nodeType":"FunctionDefinition","parameters":{"id":7817,"nodeType":"ParameterList","parameters":[{"constant":false,"id":7810,"name":"_beneficiary","nodeType":"VariableDeclaration","scope":7887,"src":"2598:20:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":7809,"name":"address","nodeType":"ElementaryTypeName","src":"2598:7:21","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":7812,"name":"_agreementHash","nodeType":"VariableDeclaration","scope":7887,"src":"2628:22:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":7811,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2628:7:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"},{"constant":false,"id":7814,"name":"_signatureType","nodeType":"VariableDeclaration","scope":7887,"src":"2660:22:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":7813,"name":"uint256","nodeType":"ElementaryTypeName","src":"2660:7:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"},{"constant":false,"id":7816,"name":"_signature","nodeType":"VariableDeclaration","scope":7887,"src":"2692:25:21","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes"},"typeName":{"id":7815,"name":"bytes","nodeType":"ElementaryTypeName","src":"2692:5:21","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"value":null,"visibility":"internal"}],"src":"2588:139:21"},"returnParameters":{"id":7820,"nodeType":"ParameterList","parameters":[{"constant":false,"id":7819,"name":"","nodeType":"VariableDeclaration","scope":7887,"src":"2761:7:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":7818,"name":"uint256","nodeType":"ElementaryTypeName","src":"2761:7:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"2760:9:21"},"scope":7983,"src":"2560:1164:21","stateMutability":"nonpayable","superFunction":null,"visibility":"external"},{"body":{"id":7981,"nodeType":"Block","src":"4070:720:21","statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"},"id":7906,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":7902,"name":"avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7725,"src":"4088:6:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":7904,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4105:1:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":7903,"name":"Avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":337,"src":"4098:6:21","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Avatar_$337_$","typeString":"type(contract Avatar)"}},"id":7905,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4098:9:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"src":"4088:19:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"73686f756c6420696e697469616c697a65206669727374","id":7907,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"4109:25:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_561d5bddf15c4f8c2230fcefd793337c8655660b728b0387ea5593dd307089fa","typeString":"literal_string \"should initialize first\""},"value":"should initialize first"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_561d5bddf15c4f8c2230fcefd793337c8655660b728b0387ea5593dd307089fa","typeString":"literal_string \"should initialize first\""}],"id":7901,"name":"require","nodeType":"Identifier","overloadedDeclarations":[20673,20674],"referencedDeclaration":20674,"src":"4080:7:21","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":7908,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4080:55:21","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":7909,"nodeType":"ExpressionStatement","src":"4080:55:21"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":7915,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"baseExpression":{"argumentTypes":null,"id":7911,"name":"redeems","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7723,"src":"4153:7:21","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"}},"id":7913,"indexExpression":{"argumentTypes":null,"id":7912,"name":"_redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7891,"src":"4161:9:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"4153:18:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"argumentTypes":null,"hexValue":"66616c7365","id":7914,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"4175:5:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"},"src":"4153:27:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"72656465656d696e672074776963652066726f6d207468652073616d65206163636f756e74206973206e6f7420616c6c6f776564","id":7916,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"4182:54:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_1b23ef334bc08b912a0c866d34d444243b06a0ba51e2ae70501e19ff1f44e0c9","typeString":"literal_string \"redeeming twice from the same account is not allowed\""},"value":"redeeming twice from the same account is not allowed"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_1b23ef334bc08b912a0c866d34d444243b06a0ba51e2ae70501e19ff1f44e0c9","typeString":"literal_string \"redeeming twice from the same account is not allowed\""}],"id":7910,"name":"require","nodeType":"Identifier","overloadedDeclarations":[20673,20674],"referencedDeclaration":20674,"src":"4145:7:21","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":7917,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4145:92:21","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":7918,"nodeType":"ExpressionStatement","src":"4145:92:21"},{"expression":{"argumentTypes":null,"id":7923,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"baseExpression":{"argumentTypes":null,"id":7919,"name":"redeems","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7723,"src":"4247:7:21","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"}},"id":7921,"indexExpression":{"argumentTypes":null,"id":7920,"name":"_redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7891,"src":"4255:9:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"4247:18:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"hexValue":"74727565","id":7922,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"4268:4:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"true"},"src":"4247:25:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":7924,"nodeType":"ExpressionStatement","src":"4247:25:21"},{"assignments":[7926],"declarations":[{"constant":false,"id":7926,"name":"tokenAmount","nodeType":"VariableDeclaration","scope":7981,"src":"4282:19:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":7925,"name":"uint256","nodeType":"ElementaryTypeName","src":"4282:7:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":7931,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7929,"name":"_redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7891,"src":"4328:9:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"argumentTypes":null,"id":7927,"name":"tokenContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7717,"src":"4304:13:21","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$20580","typeString":"contract IERC20"}},"id":7928,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":20525,"src":"4304:23:21","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":7930,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4304:34:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4282:56:21"},{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_contract$_CurveInterface_$6142","typeString":"contract CurveInterface"},"id":7936,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":7932,"name":"curve","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7719,"src":"4352:5:21","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6142","typeString":"contract CurveInterface"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":7934,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4376:1:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":7933,"name":"CurveInterface","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6142,"src":"4361:14:21","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_CurveInterface_$6142_$","typeString":"type(contract CurveInterface)"}},"id":7935,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4361:17:21","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6142","typeString":"contract CurveInterface"}},"src":"4352:26:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":null,"id":7945,"nodeType":"IfStatement","src":"4348:94:21","trueBody":{"id":7944,"nodeType":"Block","src":"4380:62:21","statements":[{"expression":{"argumentTypes":null,"id":7942,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":7937,"name":"tokenAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7926,"src":"4394:11:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7940,"name":"tokenAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7926,"src":"4419:11:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"id":7938,"name":"curve","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7719,"src":"4408:5:21","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6142","typeString":"contract CurveInterface"}},"id":7939,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"calc","nodeType":"MemberAccess","referencedDeclaration":6141,"src":"4408:10:21","typeDescriptions":{"typeIdentifier":"t_function_external_pure$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256) pure external returns (uint256)"}},"id":7941,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4408:23:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4394:37:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":7943,"nodeType":"ExpressionStatement","src":"4394:37:21"}]}},{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":7950,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":7946,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7889,"src":"4455:12:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":7948,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4479:1:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":7947,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4471:7:21","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":7949,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4471:10:21","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"src":"4455:26:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":null,"id":7956,"nodeType":"IfStatement","src":"4451:81:21","trueBody":{"id":7955,"nodeType":"Block","src":"4483:49:21","statements":[{"expression":{"argumentTypes":null,"id":7953,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":7951,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7889,"src":"4497:12:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"id":7952,"name":"_redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7891,"src":"4512:9:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"4497:24:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":7954,"nodeType":"ExpressionStatement","src":"4497:24:21"}]}},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7964,"name":"tokenAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7926,"src":"4618:11:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"argumentTypes":null,"id":7965,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7889,"src":"4631:12:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7967,"name":"avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7725,"src":"4653:6:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}],"id":7966,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4645:7:21","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":7968,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4645:15:21","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address_payable","typeString":"address payable"}],"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[],"expression":{"argumentTypes":[],"expression":{"argumentTypes":null,"id":7959,"name":"avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7725,"src":"4578:6:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"id":7960,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"owner","nodeType":"MemberAccess","referencedDeclaration":19995,"src":"4578:12:21","typeDescriptions":{"typeIdentifier":"t_function_external_view$__$returns$_t_address_$","typeString":"function () view external returns (address)"}},"id":7961,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4578:14:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":7958,"name":"Controller","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1797,"src":"4558:10:21","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Controller_$1797_$","typeString":"type(contract Controller)"}},"id":7962,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4558:35:21","typeDescriptions":{"typeIdentifier":"t_contract$_Controller_$1797","typeString":"contract Controller"}},"id":7963,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"mintReputation","nodeType":"MemberAccess","referencedDeclaration":730,"src":"4558:59:21","typeDescriptions":{"typeIdentifier":"t_function_external_nonpayable$_t_uint256_$_t_address_$_t_address_$returns$_t_bool_$","typeString":"function (uint256,address,address) external returns (bool)"}},"id":7969,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4558:103:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"6d696e742072657075746174696f6e2073686f756c642073756363656564","id":7970,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"4663:32:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_e3b0726feb8cb4c7438ba89955c351121d4188febc4d5dd6e026fd1c3a0edac6","typeString":"literal_string \"mint reputation should succeed\""},"value":"mint reputation should succeed"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_e3b0726feb8cb4c7438ba89955c351121d4188febc4d5dd6e026fd1c3a0edac6","typeString":"literal_string \"mint reputation should succeed\""}],"id":7957,"name":"require","nodeType":"Identifier","overloadedDeclarations":[20673,20674],"referencedDeclaration":20674,"src":"4541:7:21","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":7971,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4541:155:21","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":7972,"nodeType":"ExpressionStatement","src":"4541:155:21"},{"eventCall":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7974,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7889,"src":"4718:12:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":7975,"name":"_redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7891,"src":"4732:9:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":7976,"name":"tokenAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7926,"src":"4743:11:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":7973,"name":"Redeem","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7743,"src":"4711:6:21","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,address,uint256)"}},"id":7977,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4711:44:21","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":7978,"nodeType":"EmitStatement","src":"4706:49:21"},{"expression":{"argumentTypes":null,"id":7979,"name":"tokenAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7926,"src":"4772:11:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":7900,"id":7980,"nodeType":"Return","src":"4765:18:21"}]},"documentation":"@dev redeem function\n@param _beneficiary the beneficiary address to redeem for\n@param _redeemer the redeemer address\n@return uint256 minted reputation","id":7982,"implemented":true,"kind":"function","modifiers":[{"arguments":[{"argumentTypes":null,"id":7896,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7893,"src":"4033:14:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"id":7897,"modifierName":{"argumentTypes":null,"id":7895,"name":"onlyAgree","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2274,"src":"4023:9:21","typeDescriptions":{"typeIdentifier":"t_modifier$_t_bytes32_$","typeString":"modifier (bytes32)"}},"nodeType":"ModifierInvocation","src":"4023:25:21"}],"name":"_redeem","nodeType":"FunctionDefinition","parameters":{"id":7894,"nodeType":"ParameterList","parameters":[{"constant":false,"id":7889,"name":"_beneficiary","nodeType":"VariableDeclaration","scope":7982,"src":"3942:20:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":7888,"name":"address","nodeType":"ElementaryTypeName","src":"3942:7:21","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":7891,"name":"_redeemer","nodeType":"VariableDeclaration","scope":7982,"src":"3964:17:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":7890,"name":"address","nodeType":"ElementaryTypeName","src":"3964:7:21","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":7893,"name":"_agreementHash","nodeType":"VariableDeclaration","scope":7982,"src":"3983:22:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":7892,"name":"bytes32","nodeType":"ElementaryTypeName","src":"3983:7:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"src":"3941:65:21"},"returnParameters":{"id":7900,"nodeType":"ParameterList","parameters":[{"constant":false,"id":7899,"name":"","nodeType":"VariableDeclaration","scope":7982,"src":"4061:7:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":7898,"name":"uint256","nodeType":"ElementaryTypeName","src":"4061:7:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"4060:9:21"},"scope":7983,"src":"3925:865:21","stateMutability":"nonpayable","superFunction":null,"visibility":"private"}],"scope":7984,"src":"501:4291:21"}],"src":"0:4793:21"},"legacyAST":{"absolutePath":"/Users/oren/daostack/arc/contracts/schemes/ReputationFromToken.sol","exportedSymbols":{"ReputationFromToken":[7983]},"id":7984,"nodeType":"SourceUnit","nodes":[{"id":7701,"literals":["solidity","0.5",".13"],"nodeType":"PragmaDirective","src":"0:23:21"},{"absolutePath":"/Users/oren/daostack/arc/contracts/controller/Controller.sol","file":"../controller/Controller.sol","id":7702,"nodeType":"ImportDirective","scope":7984,"sourceUnit":1798,"src":"25:38:21","symbolAliases":[],"unitAlias":""},{"absolutePath":"openzeppelin-solidity/contracts/token/ERC20/IERC20.sol","file":"openzeppelin-solidity/contracts/token/ERC20/IERC20.sol","id":7703,"nodeType":"ImportDirective","scope":7984,"sourceUnit":20581,"src":"64:64:21","symbolAliases":[],"unitAlias":""},{"absolutePath":"/Users/oren/daostack/arc/contracts/schemes/CurveInterface.sol","file":"./CurveInterface.sol","id":7704,"nodeType":"ImportDirective","scope":7984,"sourceUnit":6143,"src":"129:30:21","symbolAliases":[],"unitAlias":""},{"absolutePath":"openzeppelin-solidity/contracts/cryptography/ECDSA.sol","file":"openzeppelin-solidity/contracts/cryptography/ECDSA.sol","id":7705,"nodeType":"ImportDirective","scope":7984,"sourceUnit":19703,"src":"160:64:21","symbolAliases":[],"unitAlias":""},{"absolutePath":"openzeppelin-solidity/contracts/math/SafeMath.sol","file":"openzeppelin-solidity/contracts/math/SafeMath.sol","id":7706,"nodeType":"ImportDirective","scope":7984,"sourceUnit":19959,"src":"225:59:21","symbolAliases":[],"unitAlias":""},{"absolutePath":"/Users/oren/daostack/arc/contracts/schemes/Agreement.sol","file":"./Agreement.sol","id":7707,"nodeType":"ImportDirective","scope":7984,"sourceUnit":2303,"src":"285:25:21","symbolAliases":[],"unitAlias":""},{"baseContracts":[{"arguments":null,"baseName":{"contractScope":null,"id":7708,"name":"Agreement","nodeType":"UserDefinedTypeName","referencedDeclaration":2302,"src":"533:9:21","typeDescriptions":{"typeIdentifier":"t_contract$_Agreement_$2302","typeString":"contract Agreement"}},"id":7709,"nodeType":"InheritanceSpecifier","src":"533:9:21"}],"contractDependencies":[2302],"contractKind":"contract","documentation":"@title A scheme for reputation allocation according to token balances\n       This contract is assuming that the token contract is paused, and one cannot transfer its tokens.","fullyImplemented":true,"id":7983,"linearizedBaseContracts":[7983,2302],"name":"ReputationFromToken","nodeType":"ContractDefinition","nodes":[{"id":7712,"libraryName":{"contractScope":null,"id":7710,"name":"ECDSA","nodeType":"UserDefinedTypeName","referencedDeclaration":19702,"src":"555:5:21","typeDescriptions":{"typeIdentifier":"t_contract$_ECDSA_$19702","typeString":"library ECDSA"}},"nodeType":"UsingForDirective","src":"549:24:21","typeName":{"id":7711,"name":"bytes32","nodeType":"ElementaryTypeName","src":"565:7:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}},{"id":7715,"libraryName":{"contractScope":null,"id":7713,"name":"SafeMath","nodeType":"UserDefinedTypeName","referencedDeclaration":19958,"src":"584:8:21","typeDescriptions":{"typeIdentifier":"t_contract$_SafeMath_$19958","typeString":"library SafeMath"}},"nodeType":"UsingForDirective","src":"578:27:21","typeName":{"id":7714,"name":"uint256","nodeType":"ElementaryTypeName","src":"597:7:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}},{"constant":false,"id":7717,"name":"tokenContract","nodeType":"VariableDeclaration","scope":7983,"src":"611:27:21","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$20580","typeString":"contract IERC20"},"typeName":{"contractScope":null,"id":7716,"name":"IERC20","nodeType":"UserDefinedTypeName","referencedDeclaration":20580,"src":"611:6:21","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$20580","typeString":"contract IERC20"}},"value":null,"visibility":"public"},{"constant":false,"id":7719,"name":"curve","nodeType":"VariableDeclaration","scope":7983,"src":"644:27:21","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6142","typeString":"contract CurveInterface"},"typeName":{"contractScope":null,"id":7718,"name":"CurveInterface","nodeType":"UserDefinedTypeName","referencedDeclaration":6142,"src":"644:14:21","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6142","typeString":"contract CurveInterface"}},"value":null,"visibility":"public"},{"constant":false,"id":7723,"name":"redeems","nodeType":"VariableDeclaration","scope":7983,"src":"709:43:21","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"},"typeName":{"id":7722,"keyType":{"id":7720,"name":"address","nodeType":"ElementaryTypeName","src":"717:7:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Mapping","src":"709:28:21","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"},"valueType":{"id":7721,"name":"bool","nodeType":"ElementaryTypeName","src":"732:4:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}},"value":null,"visibility":"public"},{"constant":false,"id":7725,"name":"avatar","nodeType":"VariableDeclaration","scope":7983,"src":"758:20:21","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"},"typeName":{"contractScope":null,"id":7724,"name":"Avatar","nodeType":"UserDefinedTypeName","referencedDeclaration":337,"src":"758:6:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"value":null,"visibility":"public"},{"constant":true,"id":7735,"name":"DELEGATION_HASH_EIP712","nodeType":"VariableDeclaration","scope":7983,"src":"903:184:21","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":7726,"name":"bytes32","nodeType":"ElementaryTypeName","src":"903:7:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"616464726573732052657075746174696f6e46726f6d546f6b656e41646472657373","id":7730,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"988:36:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_855db04103fa88678d4ec68f8cee807e4ac4992d181ce035ea624bb0c8be6f9b","typeString":"literal_string \"address ReputationFromTokenAddress\""},"value":"address ReputationFromTokenAddress"},{"argumentTypes":null,"hexValue":"616464726573732042656e6566696369617279","id":7731,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1030:21:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_8aac3dc7c972743a7a51b31820c9f35652dfa57834e4a271cc7863f813cc828b","typeString":"literal_string \"address Beneficiary\""},"value":"address Beneficiary"},{"argumentTypes":null,"hexValue":"627974657333322041677265656d656e7448617368","id":7732,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1057:23:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_107fb6aab0fa542db1d44d9749a8fad7ef143f4965ce62a52ce5c96a8febadad","typeString":"literal_string \"bytes32 AgreementHash\""},"value":"bytes32 AgreementHash"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_stringliteral_855db04103fa88678d4ec68f8cee807e4ac4992d181ce035ea624bb0c8be6f9b","typeString":"literal_string \"address ReputationFromTokenAddress\""},{"typeIdentifier":"t_stringliteral_8aac3dc7c972743a7a51b31820c9f35652dfa57834e4a271cc7863f813cc828b","typeString":"literal_string \"address Beneficiary\""},{"typeIdentifier":"t_stringliteral_107fb6aab0fa542db1d44d9749a8fad7ef143f4965ce62a52ce5c96a8febadad","typeString":"literal_string \"bytes32 AgreementHash\""}],"expression":{"argumentTypes":null,"id":7728,"name":"abi","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20657,"src":"966:3:21","typeDescriptions":{"typeIdentifier":"t_magic_abi","typeString":"abi"}},"id":7729,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberName":"encodePacked","nodeType":"MemberAccess","referencedDeclaration":null,"src":"966:16:21","typeDescriptions":{"typeIdentifier":"t_function_abiencodepacked_pure$__$returns$_t_bytes_memory_ptr_$","typeString":"function () pure returns (bytes memory)"}},"id":7733,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"966:120:21","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":7727,"name":"keccak256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20664,"src":"956:9:21","typeDescriptions":{"typeIdentifier":"t_function_keccak256_pure$_t_bytes_memory_ptr_$returns$_t_bytes32_$","typeString":"function (bytes memory) pure returns (bytes32)"}},"id":7734,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"956:131:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"public"},{"anonymous":false,"documentation":null,"id":7743,"name":"Redeem","nodeType":"EventDefinition","parameters":{"id":7742,"nodeType":"ParameterList","parameters":[{"constant":false,"id":7737,"indexed":true,"name":"_beneficiary","nodeType":"VariableDeclaration","scope":7743,"src":"1107:28:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":7736,"name":"address","nodeType":"ElementaryTypeName","src":"1107:7:21","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":7739,"indexed":true,"name":"_sender","nodeType":"VariableDeclaration","scope":7743,"src":"1137:23:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":7738,"name":"address","nodeType":"ElementaryTypeName","src":"1137:7:21","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":7741,"indexed":false,"name":"_amount","nodeType":"VariableDeclaration","scope":7743,"src":"1162:15:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":7740,"name":"uint256","nodeType":"ElementaryTypeName","src":"1162:7:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"1106:72:21"},"src":"1094:85:21"},{"body":{"id":7790,"nodeType":"Block","src":"1547:278:21","statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"},"id":7759,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":7755,"name":"avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7725,"src":"1565:6:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":7757,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1582:1:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":7756,"name":"Avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":337,"src":"1575:6:21","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Avatar_$337_$","typeString":"type(contract Avatar)"}},"id":7758,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1575:9:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"src":"1565:19:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"63616e2062652063616c6c6564206f6e6c79206f6e652074696d65","id":7760,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1586:29:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_61459d8c2e83c03ac4ccaf4013950b2282c585e1eb42ab84ceae1eecfe85edd8","typeString":"literal_string \"can be called only one time\""},"value":"can be called only one time"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_61459d8c2e83c03ac4ccaf4013950b2282c585e1eb42ab84ceae1eecfe85edd8","typeString":"literal_string \"can be called only one time\""}],"id":7754,"name":"require","nodeType":"Identifier","overloadedDeclarations":[20673,20674],"referencedDeclaration":20674,"src":"1557:7:21","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":7761,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1557:59:21","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":7762,"nodeType":"ExpressionStatement","src":"1557:59:21"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"},"id":7768,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":7764,"name":"_avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7745,"src":"1634:7:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":7766,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1652:1:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":7765,"name":"Avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":337,"src":"1645:6:21","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Avatar_$337_$","typeString":"type(contract Avatar)"}},"id":7767,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1645:9:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"src":"1634:20:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"6176617461722063616e6e6f74206265207a65726f","id":7769,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1656:23:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_3338e04ce106ab83a89a6f78ac95362796c47f8acb99702d3b473607a80d58e0","typeString":"literal_string \"avatar cannot be zero\""},"value":"avatar cannot be zero"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_3338e04ce106ab83a89a6f78ac95362796c47f8acb99702d3b473607a80d58e0","typeString":"literal_string \"avatar cannot be zero\""}],"id":7763,"name":"require","nodeType":"Identifier","overloadedDeclarations":[20673,20674],"referencedDeclaration":20674,"src":"1626:7:21","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":7770,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1626:54:21","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":7771,"nodeType":"ExpressionStatement","src":"1626:54:21"},{"expression":{"argumentTypes":null,"id":7774,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":7772,"name":"tokenContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7717,"src":"1690:13:21","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$20580","typeString":"contract IERC20"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"id":7773,"name":"_tokenContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7747,"src":"1706:14:21","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$20580","typeString":"contract IERC20"}},"src":"1690:30:21","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$20580","typeString":"contract IERC20"}},"id":7775,"nodeType":"ExpressionStatement","src":"1690:30:21"},{"expression":{"argumentTypes":null,"id":7778,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":7776,"name":"avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7725,"src":"1730:6:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"id":7777,"name":"_avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7745,"src":"1739:7:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"src":"1730:16:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"id":7779,"nodeType":"ExpressionStatement","src":"1730:16:21"},{"expression":{"argumentTypes":null,"id":7782,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":7780,"name":"curve","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7719,"src":"1756:5:21","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6142","typeString":"contract CurveInterface"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"id":7781,"name":"_curve","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7749,"src":"1764:6:21","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6142","typeString":"contract CurveInterface"}},"src":"1756:14:21","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6142","typeString":"contract CurveInterface"}},"id":7783,"nodeType":"ExpressionStatement","src":"1756:14:21"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7787,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7751,"src":"1803:14:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"argumentTypes":null,"id":7784,"name":"super","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20765,"src":"1780:5:21","typeDescriptions":{"typeIdentifier":"t_super$_ReputationFromToken_$7983","typeString":"contract super ReputationFromToken"}},"id":7786,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"setAgreementHash","nodeType":"MemberAccess","referencedDeclaration":2301,"src":"1780:22:21","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_bytes32_$returns$__$","typeString":"function (bytes32)"}},"id":7788,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1780:38:21","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":7789,"nodeType":"ExpressionStatement","src":"1780:38:21"}]},"documentation":"@dev initialize\n@param _avatar the avatar to mint reputation from\n@param _tokenContract the token contract\n@param _agreementHash is a hash of agreement required to be added to the TX by participants","id":7791,"implemented":true,"kind":"function","modifiers":[],"name":"initialize","nodeType":"FunctionDefinition","parameters":{"id":7752,"nodeType":"ParameterList","parameters":[{"constant":false,"id":7745,"name":"_avatar","nodeType":"VariableDeclaration","scope":7791,"src":"1448:14:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"},"typeName":{"contractScope":null,"id":7744,"name":"Avatar","nodeType":"UserDefinedTypeName","referencedDeclaration":337,"src":"1448:6:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"value":null,"visibility":"internal"},{"constant":false,"id":7747,"name":"_tokenContract","nodeType":"VariableDeclaration","scope":7791,"src":"1464:21:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$20580","typeString":"contract IERC20"},"typeName":{"contractScope":null,"id":7746,"name":"IERC20","nodeType":"UserDefinedTypeName","referencedDeclaration":20580,"src":"1464:6:21","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$20580","typeString":"contract IERC20"}},"value":null,"visibility":"internal"},{"constant":false,"id":7749,"name":"_curve","nodeType":"VariableDeclaration","scope":7791,"src":"1487:21:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6142","typeString":"contract CurveInterface"},"typeName":{"contractScope":null,"id":7748,"name":"CurveInterface","nodeType":"UserDefinedTypeName","referencedDeclaration":6142,"src":"1487:14:21","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6142","typeString":"contract CurveInterface"}},"value":null,"visibility":"internal"},{"constant":false,"id":7751,"name":"_agreementHash","nodeType":"VariableDeclaration","scope":7791,"src":"1510:22:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":7750,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1510:7:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"src":"1447:86:21"},"returnParameters":{"id":7753,"nodeType":"ParameterList","parameters":[],"src":"1547:0:21"},"scope":7983,"src":"1428:397:21","stateMutability":"nonpayable","superFunction":null,"visibility":"external"},{"body":{"id":7807,"nodeType":"Block","src":"2121:73:21","statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7801,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7793,"src":"2146:12:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"expression":{"argumentTypes":null,"id":7802,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20670,"src":"2160:3:21","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":7803,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"sender","nodeType":"MemberAccess","referencedDeclaration":null,"src":"2160:10:21","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},{"argumentTypes":null,"id":7804,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7795,"src":"2172:14:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address_payable","typeString":"address payable"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"id":7800,"name":"_redeem","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7982,"src":"2138:7:21","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_address_$_t_address_$_t_bytes32_$returns$_t_uint256_$","typeString":"function (address,address,bytes32) returns (uint256)"}},"id":7805,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2138:49:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":7799,"id":7806,"nodeType":"Return","src":"2131:56:21"}]},"documentation":"@dev redeem function\n@param _beneficiary the beneficiary address to redeem for\n@param _agreementHash the agreementHash hash\n@return uint256 minted reputation","id":7808,"implemented":true,"kind":"function","modifiers":[],"name":"redeem","nodeType":"FunctionDefinition","parameters":{"id":7796,"nodeType":"ParameterList","parameters":[{"constant":false,"id":7793,"name":"_beneficiary","nodeType":"VariableDeclaration","scope":7808,"src":"2049:20:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":7792,"name":"address","nodeType":"ElementaryTypeName","src":"2049:7:21","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":7795,"name":"_agreementHash","nodeType":"VariableDeclaration","scope":7808,"src":"2071:22:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":7794,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2071:7:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"src":"2048:46:21"},"returnParameters":{"id":7799,"nodeType":"ParameterList","parameters":[{"constant":false,"id":7798,"name":"","nodeType":"VariableDeclaration","scope":7808,"src":"2112:7:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":7797,"name":"uint256","nodeType":"ElementaryTypeName","src":"2112:7:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"2111:9:21"},"scope":7983,"src":"2033:161:21","stateMutability":"nonpayable","superFunction":null,"visibility":"external"},{"body":{"id":7886,"nodeType":"Block","src":"2778:946:21","statements":[{"assignments":[7822],"declarations":[{"constant":false,"id":7822,"name":"delegationDigest","nodeType":"VariableDeclaration","scope":7886,"src":"2835:24:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":7821,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2835:7:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"id":7823,"initialValue":null,"nodeType":"VariableDeclarationStatement","src":"2835:24:21"},{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":7826,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":7824,"name":"_signatureType","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7814,"src":"2873:14:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"argumentTypes":null,"hexValue":"32","id":7825,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2891:1:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"src":"2873:19:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":7862,"nodeType":"Block","src":"3256:260:21","statements":[{"expression":{"argumentTypes":null,"id":7860,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":7847,"name":"delegationDigest","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7822,"src":"3270:16:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"arguments":[],"expression":{"argumentTypes":[],"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7852,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20764,"src":"3374:4:21","typeDescriptions":{"typeIdentifier":"t_contract$_ReputationFromToken_$7983","typeString":"contract ReputationFromToken"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_ReputationFromToken_$7983","typeString":"contract ReputationFromToken"}],"id":7851,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3366:7:21","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":7853,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3366:13:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":7854,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7810,"src":"3405:12:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":7855,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7812,"src":"3443:14:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"argumentTypes":null,"id":7849,"name":"abi","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20657,"src":"3324:3:21","typeDescriptions":{"typeIdentifier":"t_magic_abi","typeString":"abi"}},"id":7850,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberName":"encodePacked","nodeType":"MemberAccess","referencedDeclaration":null,"src":"3324:16:21","typeDescriptions":{"typeIdentifier":"t_function_abiencodepacked_pure$__$returns$_t_bytes_memory_ptr_$","typeString":"function () pure returns (bytes memory)"}},"id":7856,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3324:134:21","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":7848,"name":"keccak256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20664,"src":"3289:9:21","typeDescriptions":{"typeIdentifier":"t_function_keccak256_pure$_t_bytes_memory_ptr_$returns$_t_bytes32_$","typeString":"function (bytes memory) pure returns (bytes32)"}},"id":7857,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3289:191:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":7858,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"toEthSignedMessageHash","nodeType":"MemberAccess","referencedDeclaration":19701,"src":"3289:214:21","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_bytes32_$returns$_t_bytes32_$bound_to$_t_bytes32_$","typeString":"function (bytes32) pure returns (bytes32)"}},"id":7859,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3289:216:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"3270:235:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":7861,"nodeType":"ExpressionStatement","src":"3270:235:21"}]},"id":7863,"nodeType":"IfStatement","src":"2869:647:21","trueBody":{"id":7846,"nodeType":"Block","src":"2894:356:21","statements":[{"expression":{"argumentTypes":null,"id":7844,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":7827,"name":"delegationDigest","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7822,"src":"2908:16:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7831,"name":"DELEGATION_HASH_EIP712","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7735,"src":"2992:22:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7836,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20764,"src":"3101:4:21","typeDescriptions":{"typeIdentifier":"t_contract$_ReputationFromToken_$7983","typeString":"contract ReputationFromToken"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_ReputationFromToken_$7983","typeString":"contract ReputationFromToken"}],"id":7835,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3093:7:21","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":7837,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3093:13:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":7838,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7810,"src":"3132:12:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":7839,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7812,"src":"3170:14:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"argumentTypes":null,"id":7833,"name":"abi","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20657,"src":"3051:3:21","typeDescriptions":{"typeIdentifier":"t_magic_abi","typeString":"abi"}},"id":7834,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberName":"encodePacked","nodeType":"MemberAccess","referencedDeclaration":null,"src":"3051:16:21","typeDescriptions":{"typeIdentifier":"t_function_abiencodepacked_pure$__$returns$_t_bytes_memory_ptr_$","typeString":"function () pure returns (bytes memory)"}},"id":7840,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3051:134:21","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":7832,"name":"keccak256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20664,"src":"3016:9:21","typeDescriptions":{"typeIdentifier":"t_function_keccak256_pure$_t_bytes_memory_ptr_$returns$_t_bytes32_$","typeString":"function (bytes memory) pure returns (bytes32)"}},"id":7841,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3016:191:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"argumentTypes":null,"id":7829,"name":"abi","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20657,"src":"2954:3:21","typeDescriptions":{"typeIdentifier":"t_magic_abi","typeString":"abi"}},"id":7830,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberName":"encodePacked","nodeType":"MemberAccess","referencedDeclaration":null,"src":"2954:16:21","typeDescriptions":{"typeIdentifier":"t_function_abiencodepacked_pure$__$returns$_t_bytes_memory_ptr_$","typeString":"function () pure returns (bytes memory)"}},"id":7842,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2954:271:21","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":7828,"name":"keccak256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":20664,"src":"2927:9:21","typeDescriptions":{"typeIdentifier":"t_function_keccak256_pure$_t_bytes_memory_ptr_$returns$_t_bytes32_$","typeString":"function (bytes memory) pure returns (bytes32)"}},"id":7843,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2927:312:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"2908:331:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":7845,"nodeType":"ExpressionStatement","src":"2908:331:21"}]}},{"assignments":[7865],"declarations":[{"constant":false,"id":7865,"name":"redeemer","nodeType":"VariableDeclaration","scope":7886,"src":"3525:16:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":7864,"name":"address","nodeType":"ElementaryTypeName","src":"3525:7:21","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"}],"id":7870,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7868,"name":"_signature","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7816,"src":"3569:10:21","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes calldata"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes calldata"}],"expression":{"argumentTypes":null,"id":7866,"name":"delegationDigest","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7822,"src":"3544:16:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":7867,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"recover","nodeType":"MemberAccess","referencedDeclaration":19685,"src":"3544:24:21","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_bytes32_$_t_bytes_memory_ptr_$returns$_t_address_$bound_to$_t_bytes32_$","typeString":"function (bytes32,bytes memory) pure returns (address)"}},"id":7869,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3544:36:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"VariableDeclarationStatement","src":"3525:55:21"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":7876,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":7872,"name":"redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7865,"src":"3598:8:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":7874,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3618:1:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":7873,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3610:7:21","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":7875,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3610:10:21","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"src":"3598:22:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"72656465656d657220616464726573732063616e6e6f742062652030","id":7877,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"3622:30:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_1dd1a9b2ffbe0d1ded5d8e7625b440be45642c5f735dba078df15bf3dbdffb59","typeString":"literal_string \"redeemer address cannot be 0\""},"value":"redeemer address cannot be 0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_1dd1a9b2ffbe0d1ded5d8e7625b440be45642c5f735dba078df15bf3dbdffb59","typeString":"literal_string \"redeemer address cannot be 0\""}],"id":7871,"name":"require","nodeType":"Identifier","overloadedDeclarations":[20673,20674],"referencedDeclaration":20674,"src":"3590:7:21","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":7878,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3590:63:21","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":7879,"nodeType":"ExpressionStatement","src":"3590:63:21"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7881,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7810,"src":"3678:12:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":7882,"name":"redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7865,"src":"3692:8:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":7883,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7812,"src":"3702:14:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"id":7880,"name":"_redeem","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7982,"src":"3670:7:21","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_address_$_t_address_$_t_bytes32_$returns$_t_uint256_$","typeString":"function (address,address,bytes32) returns (uint256)"}},"id":7884,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3670:47:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":7820,"id":7885,"nodeType":"Return","src":"3663:54:21"}]},"documentation":"@dev redeemWithSignature function\n@param _beneficiary the beneficiary address to redeem for\n@param _signatureType signature type\n1 - for web3.eth.sign\n2 - for eth_signTypedData according to EIP #712.\n@param _signature  - signed data by the staker\n@return uint256 minted reputation","id":7887,"implemented":true,"kind":"function","modifiers":[],"name":"redeemWithSignature","nodeType":"FunctionDefinition","parameters":{"id":7817,"nodeType":"ParameterList","parameters":[{"constant":false,"id":7810,"name":"_beneficiary","nodeType":"VariableDeclaration","scope":7887,"src":"2598:20:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":7809,"name":"address","nodeType":"ElementaryTypeName","src":"2598:7:21","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":7812,"name":"_agreementHash","nodeType":"VariableDeclaration","scope":7887,"src":"2628:22:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":7811,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2628:7:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"},{"constant":false,"id":7814,"name":"_signatureType","nodeType":"VariableDeclaration","scope":7887,"src":"2660:22:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":7813,"name":"uint256","nodeType":"ElementaryTypeName","src":"2660:7:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"},{"constant":false,"id":7816,"name":"_signature","nodeType":"VariableDeclaration","scope":7887,"src":"2692:25:21","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes"},"typeName":{"id":7815,"name":"bytes","nodeType":"ElementaryTypeName","src":"2692:5:21","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"value":null,"visibility":"internal"}],"src":"2588:139:21"},"returnParameters":{"id":7820,"nodeType":"ParameterList","parameters":[{"constant":false,"id":7819,"name":"","nodeType":"VariableDeclaration","scope":7887,"src":"2761:7:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":7818,"name":"uint256","nodeType":"ElementaryTypeName","src":"2761:7:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"2760:9:21"},"scope":7983,"src":"2560:1164:21","stateMutability":"nonpayable","superFunction":null,"visibility":"external"},{"body":{"id":7981,"nodeType":"Block","src":"4070:720:21","statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"},"id":7906,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":7902,"name":"avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7725,"src":"4088:6:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":7904,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4105:1:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":7903,"name":"Avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":337,"src":"4098:6:21","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Avatar_$337_$","typeString":"type(contract Avatar)"}},"id":7905,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4098:9:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"src":"4088:19:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"73686f756c6420696e697469616c697a65206669727374","id":7907,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"4109:25:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_561d5bddf15c4f8c2230fcefd793337c8655660b728b0387ea5593dd307089fa","typeString":"literal_string \"should initialize first\""},"value":"should initialize first"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_561d5bddf15c4f8c2230fcefd793337c8655660b728b0387ea5593dd307089fa","typeString":"literal_string \"should initialize first\""}],"id":7901,"name":"require","nodeType":"Identifier","overloadedDeclarations":[20673,20674],"referencedDeclaration":20674,"src":"4080:7:21","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":7908,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4080:55:21","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":7909,"nodeType":"ExpressionStatement","src":"4080:55:21"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":7915,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"baseExpression":{"argumentTypes":null,"id":7911,"name":"redeems","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7723,"src":"4153:7:21","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"}},"id":7913,"indexExpression":{"argumentTypes":null,"id":7912,"name":"_redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7891,"src":"4161:9:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"4153:18:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"argumentTypes":null,"hexValue":"66616c7365","id":7914,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"4175:5:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"},"src":"4153:27:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"72656465656d696e672074776963652066726f6d207468652073616d65206163636f756e74206973206e6f7420616c6c6f776564","id":7916,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"4182:54:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_1b23ef334bc08b912a0c866d34d444243b06a0ba51e2ae70501e19ff1f44e0c9","typeString":"literal_string \"redeeming twice from the same account is not allowed\""},"value":"redeeming twice from the same account is not allowed"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_1b23ef334bc08b912a0c866d34d444243b06a0ba51e2ae70501e19ff1f44e0c9","typeString":"literal_string \"redeeming twice from the same account is not allowed\""}],"id":7910,"name":"require","nodeType":"Identifier","overloadedDeclarations":[20673,20674],"referencedDeclaration":20674,"src":"4145:7:21","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":7917,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4145:92:21","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":7918,"nodeType":"ExpressionStatement","src":"4145:92:21"},{"expression":{"argumentTypes":null,"id":7923,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"baseExpression":{"argumentTypes":null,"id":7919,"name":"redeems","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7723,"src":"4247:7:21","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"}},"id":7921,"indexExpression":{"argumentTypes":null,"id":7920,"name":"_redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7891,"src":"4255:9:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"4247:18:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"hexValue":"74727565","id":7922,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"4268:4:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"true"},"src":"4247:25:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":7924,"nodeType":"ExpressionStatement","src":"4247:25:21"},{"assignments":[7926],"declarations":[{"constant":false,"id":7926,"name":"tokenAmount","nodeType":"VariableDeclaration","scope":7981,"src":"4282:19:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":7925,"name":"uint256","nodeType":"ElementaryTypeName","src":"4282:7:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":7931,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7929,"name":"_redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7891,"src":"4328:9:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"argumentTypes":null,"id":7927,"name":"tokenContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7717,"src":"4304:13:21","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$20580","typeString":"contract IERC20"}},"id":7928,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":20525,"src":"4304:23:21","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":7930,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4304:34:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4282:56:21"},{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_contract$_CurveInterface_$6142","typeString":"contract CurveInterface"},"id":7936,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":7932,"name":"curve","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7719,"src":"4352:5:21","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6142","typeString":"contract CurveInterface"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":7934,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4376:1:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":7933,"name":"CurveInterface","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6142,"src":"4361:14:21","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_CurveInterface_$6142_$","typeString":"type(contract CurveInterface)"}},"id":7935,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4361:17:21","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6142","typeString":"contract CurveInterface"}},"src":"4352:26:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":null,"id":7945,"nodeType":"IfStatement","src":"4348:94:21","trueBody":{"id":7944,"nodeType":"Block","src":"4380:62:21","statements":[{"expression":{"argumentTypes":null,"id":7942,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":7937,"name":"tokenAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7926,"src":"4394:11:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7940,"name":"tokenAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7926,"src":"4419:11:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"id":7938,"name":"curve","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7719,"src":"4408:5:21","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6142","typeString":"contract CurveInterface"}},"id":7939,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"calc","nodeType":"MemberAccess","referencedDeclaration":6141,"src":"4408:10:21","typeDescriptions":{"typeIdentifier":"t_function_external_pure$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256) pure external returns (uint256)"}},"id":7941,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4408:23:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4394:37:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":7943,"nodeType":"ExpressionStatement","src":"4394:37:21"}]}},{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":7950,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":7946,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7889,"src":"4455:12:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":7948,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4479:1:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":7947,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4471:7:21","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":7949,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4471:10:21","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"src":"4455:26:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":null,"id":7956,"nodeType":"IfStatement","src":"4451:81:21","trueBody":{"id":7955,"nodeType":"Block","src":"4483:49:21","statements":[{"expression":{"argumentTypes":null,"id":7953,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":7951,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7889,"src":"4497:12:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"id":7952,"name":"_redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7891,"src":"4512:9:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"4497:24:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":7954,"nodeType":"ExpressionStatement","src":"4497:24:21"}]}},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7964,"name":"tokenAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7926,"src":"4618:11:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"argumentTypes":null,"id":7965,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7889,"src":"4631:12:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7967,"name":"avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7725,"src":"4653:6:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}],"id":7966,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4645:7:21","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":7968,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4645:15:21","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address_payable","typeString":"address payable"}],"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[],"expression":{"argumentTypes":[],"expression":{"argumentTypes":null,"id":7959,"name":"avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7725,"src":"4578:6:21","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"id":7960,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"owner","nodeType":"MemberAccess","referencedDeclaration":19995,"src":"4578:12:21","typeDescriptions":{"typeIdentifier":"t_function_external_view$__$returns$_t_address_$","typeString":"function () view external returns (address)"}},"id":7961,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4578:14:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":7958,"name":"Controller","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1797,"src":"4558:10:21","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Controller_$1797_$","typeString":"type(contract Controller)"}},"id":7962,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4558:35:21","typeDescriptions":{"typeIdentifier":"t_contract$_Controller_$1797","typeString":"contract Controller"}},"id":7963,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"mintReputation","nodeType":"MemberAccess","referencedDeclaration":730,"src":"4558:59:21","typeDescriptions":{"typeIdentifier":"t_function_external_nonpayable$_t_uint256_$_t_address_$_t_address_$returns$_t_bool_$","typeString":"function (uint256,address,address) external returns (bool)"}},"id":7969,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4558:103:21","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"6d696e742072657075746174696f6e2073686f756c642073756363656564","id":7970,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"4663:32:21","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_e3b0726feb8cb4c7438ba89955c351121d4188febc4d5dd6e026fd1c3a0edac6","typeString":"literal_string \"mint reputation should succeed\""},"value":"mint reputation should succeed"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_e3b0726feb8cb4c7438ba89955c351121d4188febc4d5dd6e026fd1c3a0edac6","typeString":"literal_string \"mint reputation should succeed\""}],"id":7957,"name":"require","nodeType":"Identifier","overloadedDeclarations":[20673,20674],"referencedDeclaration":20674,"src":"4541:7:21","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":7971,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4541:155:21","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":7972,"nodeType":"ExpressionStatement","src":"4541:155:21"},{"eventCall":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":7974,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7889,"src":"4718:12:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":7975,"name":"_redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7891,"src":"4732:9:21","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":7976,"name":"tokenAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7926,"src":"4743:11:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":7973,"name":"Redeem","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7743,"src":"4711:6:21","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,address,uint256)"}},"id":7977,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4711:44:21","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":7978,"nodeType":"EmitStatement","src":"4706:49:21"},{"expression":{"argumentTypes":null,"id":7979,"name":"tokenAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7926,"src":"4772:11:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":7900,"id":7980,"nodeType":"Return","src":"4765:18:21"}]},"documentation":"@dev redeem function\n@param _beneficiary the beneficiary address to redeem for\n@param _redeemer the redeemer address\n@return uint256 minted reputation","id":7982,"implemented":true,"kind":"function","modifiers":[{"arguments":[{"argumentTypes":null,"id":7896,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7893,"src":"4033:14:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"id":7897,"modifierName":{"argumentTypes":null,"id":7895,"name":"onlyAgree","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2274,"src":"4023:9:21","typeDescriptions":{"typeIdentifier":"t_modifier$_t_bytes32_$","typeString":"modifier (bytes32)"}},"nodeType":"ModifierInvocation","src":"4023:25:21"}],"name":"_redeem","nodeType":"FunctionDefinition","parameters":{"id":7894,"nodeType":"ParameterList","parameters":[{"constant":false,"id":7889,"name":"_beneficiary","nodeType":"VariableDeclaration","scope":7982,"src":"3942:20:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":7888,"name":"address","nodeType":"ElementaryTypeName","src":"3942:7:21","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":7891,"name":"_redeemer","nodeType":"VariableDeclaration","scope":7982,"src":"3964:17:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":7890,"name":"address","nodeType":"ElementaryTypeName","src":"3964:7:21","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":7893,"name":"_agreementHash","nodeType":"VariableDeclaration","scope":7982,"src":"3983:22:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":7892,"name":"bytes32","nodeType":"ElementaryTypeName","src":"3983:7:21","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"src":"3941:65:21"},"returnParameters":{"id":7900,"nodeType":"ParameterList","parameters":[{"constant":false,"id":7899,"name":"","nodeType":"VariableDeclaration","scope":7982,"src":"4061:7:21","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":7898,"name":"uint256","nodeType":"ElementaryTypeName","src":"4061:7:21","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"4060:9:21"},"scope":7983,"src":"3925:865:21","stateMutability":"nonpayable","superFunction":null,"visibility":"private"}],"scope":7984,"src":"501:4291:21"}],"src":"0:4793:21"},"compiler":{"name":"solc","version":"0.5.13+commit.5b0b510c.Emscripten.clang"},"networks":{},"schemaVersion":"3.0.14","updatedAt":"2019-12-09T10:59:45.600Z","devdoc":{"methods":{"getAgreementHash()":{"details":"getAgreementHash","return":"bytes32 agreementHash"},"initialize(address,address,address,bytes32)":{"details":"initialize","params":{"_agreementHash":"is a hash of agreement required to be added to the TX by participants","_avatar":"the avatar to mint reputation from","_tokenContract":"the token contract"}},"redeem(address,bytes32)":{"details":"redeem function","params":{"_agreementHash":"the agreementHash hash","_beneficiary":"the beneficiary address to redeem for"},"return":"uint256 minted reputation"},"redeemWithSignature(address,bytes32,uint256,bytes)":{"details":"redeemWithSignature function","params":{"_beneficiary":"the beneficiary address to redeem for","_signature":"- signed data by the staker","_signatureType":"signature type 1 - for web3.eth.sign 2 - for eth_signTypedData according to EIP #712."},"return":"uint256 minted reputation"}},"title":"A scheme for reputation allocation according to token balances       This contract is assuming that the token contract is paused, and one cannot transfer its tokens."},"userdoc":{"methods":{}}}